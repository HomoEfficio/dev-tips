# 목(Mock)과 스텁(Stub) 초간단 구별

둘 다 테스트에 사용하는 가짜 객체지만 구별하기는 또 애매하다. 다음과 같이 구별하면 크게 틀리지 않는다.

>- **목 객체는 메소드 호출 여부, 순서, 횟수 등 행위 검증(behavior verification)** 을 위해 만들어 사용하는 가짜 객체  
>- **스텁 객체는 값 기반의 상태 검증(state verification)** 을 위해 미리 정해진 값을 반환하도록 만들어 사용하는 가짜 객체

>- 동작 검증에 사용하는 목 객체는 복잡한 기능이 포함되므로 테스트 프레임워크를 통해서만 생성할 수 있고,  
>- 상태 검증에 사용하는 스텁 객체는 간단하므로 `new XXX()`와 같이 직접 생성할 수도 있다.

자세한 내용은 [마틴 파울러의 글](https://martinfowler.com/articles/mocksArentStubs.html)을 참고한다.

---
관련 페북에 올려둔 글

Mock과 Stub이 뭐가 다른지 설명하라고 하면 어버버..

근데 왜 이렇게 구별해서 설명을 못 할 까 생각해보니,  
Mockito를 사용하다보면,  
동작 검증(behavior verification)을 하든,  
상태 검증(state verification)을 하든,  
모두 Mockito 프레임워크가 제공해주는 @Mock이라는 애노테이션으로 가짜 객체를 생성하기 때문인 것 같다.

그러니 한 걸음 더 구체적인 설명이 필요하다면,  
동작 검증에 사용하는 Mock은 테스트 프레임워크를 통해서만 생성할 수 있고,  
상태 검증에 사용하는 Stub은 new XXX()와 같이 직접 생성할 수도 있다.  
라고 설명해도 괜찮을 것 같다.

테스트 더블 이라는 이름이 우리 같은 외쿡인들에게는 별로 와닿는 이름이 아니라 잘 쓰이지는 않는 것 같다.

#Test #Mock #Stub
